/*
  * jQuery Canvas Spinner Plugin
  * version: 1.0
  * Author: Ollie Relph
  * http://github.com/BBB/jquery-canvasspinner
  * Copyright: Copyright 2010 Ollie Relph
  */ 
  (function(c){c.fn.spinner=function(a){a=c.extend({sqr:0,framerate:10,spokes:16,colour:"255,255,255",backup:"images/spinner.gif"},a||{});return this.each(function(){function i(){b.clearRect(d*-1,d*-1,a.sqr,a.sqr);b.rotate(Math.PI*2/a.spokes);for(var h=0;h<a.spokes;h++){b.rotate(Math.PI*2/a.spokes);b.strokeStyle="rgba("+a.colour+","+h/a.spokes+")";b.beginPath();b.moveTo(0,d*0.3);b.lineTo(0,d*0.6);b.stroke()}}var f=c(this),e=f.width(),g=f.height(),b;if(a.sqr===0)a.sqr=Math.round(e>=g?g:e);var d=a.sqr/
  2;e=c('<div id="spinner-'+c.fn.spinner.count+'" class="spinner" />').css({position:"absolute","z-index":999,left:"50%",top:"50%",margin:d*-1+"px 0 0 "+d*-1+"px",width:a.sqr,height:a.sqr});$canv=c("<canvas />").attr({width:a.sqr,height:a.sqr});f.css("position")==="static"&&f.css({position:"relative"});$canv.appendTo(e);e.appendTo(f);if($canv[0].getContext){b=$canv[0].getContext("2d");b.translate(d,d);b.lineWidth=Math.ceil(a.sqr*0.025);b.lineCap="round";this.loop=setInterval(i,1E3/a.framerate)}else{$canv.remove();
  e.css({"background-image":"url("+a.backup+")","background-position":"center center","background-repeat":"none"})}c.fn.spinner.count++})};c.fn.spinner.count=0;c.fn.clearSpinner=function(){return this.each(function(){clearTimeout(c.fn.spinner.loop);c(this).find("div.spinner").fadeOut().remove().end()})}})(window.jQuery);